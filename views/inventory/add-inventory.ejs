<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title><%= title %> | CSE Motors</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>

  <main id="add-inventory">


    <div class="form-container">
      <p class="notice">All fields are required.</p>
      
      <form id="addInventoryForm" action="/inv/add-inventory" method="post">
        
        <label for="classificationList">Classification:</label>
        <%- classificationList %>
        
        <label for="inv_make">Make:</label>
        <input 
          type="text" 
          id="inv_make" 
          name="inv_make" 
          required
          placeholder="Enter vehicle make (min 3 characters)"
          value="<%= locals.inv_make || '' %>"
        >

        <label for="inv_model">Model:</label>
        <input 
          type="text" 
          id="inv_model" 
          name="inv_model" 
          required
          placeholder="Enter vehicle model (min 3 characters)"
          value="<%= locals.inv_model || '' %>"
        >

        <label for="inv_year">Year:</label>
        <input 
          type="text" 
          id="inv_year" 
          name="inv_year" 
          required
          pattern="\d{4}"
          maxlength="4"
          placeholder="Enter 4-digit year"
          value="<%= locals.inv_year || '' %>"
        >

        <label for="inv_description">Description:</label>
        <textarea 
          id="inv_description" 
          name="inv_description" 
          required
          rows="4"
          placeholder="Enter vehicle description"
        ><%= locals.inv_description || '' %></textarea>

        <label for="inv_image">Image Path:</label>
        <input 
          type="text" 
          id="inv_image" 
          name="inv_image" 
          required
          placeholder="/images/vehicles/no-image.png"
          value="<%= locals.inv_image || '/images/vehicles/no-image.png' %>"
        >

        <label for="inv_thumbnail">Thumbnail Path:</label>
        <input 
          type="text" 
          id="inv_thumbnail" 
          name="inv_thumbnail" 
          required
          placeholder="/images/vehicles/no-image-tn.png"
          value="<%= locals.inv_thumbnail || '/images/vehicles/no-image-tn.png' %>"
        >

        <label for="inv_price">Price:</label>
        <input 
          type="number" 
          id="inv_price" 
          name="inv_price" 
          required
          min="0"
          step="0.01"
          placeholder="Enter price"
          value="<%= locals.inv_price || '' %>"
        >

        <label for="inv_miles">Miles:</label>
        <input 
          type="number" 
          id="inv_miles" 
          name="inv_miles" 
          required
          min="0"
          placeholder="Enter mileage"
          value="<%= locals.inv_miles || '' %>"
        >

        <label for="inv_color">Color:</label>
        <input 
          type="text" 
          id="inv_color" 
          name="inv_color" 
          required
          placeholder="Enter vehicle color"
          value="<%= locals.inv_color || '' %>"
        >
        
        <button type="submit" class="submit-btn">Add Vehicle</button>
      </form>
    </div>
  </main>
  
  <script>
    // Client-side validation
    const form = document.getElementById('addInventoryForm');
    
    form.addEventListener('submit', function(event) {
      let isValid = true;
      
      // Validate classification selection
      const classification = document.getElementById('classificationList');
      if (!classification.value) {
        alert('Please select a classification.');
        isValid = false;
      }
      
      // Validate make (min 3 characters)
      const make = document.getElementById('inv_make');
      if (make.value.trim().length < 3) {
        alert('Make must be at least 3 characters.');
        isValid = false;
      }
      
      // Validate model (min 3 characters)
      const model = document.getElementById('inv_model');
      if (model.value.trim().length < 3) {
        alert('Model must be at least 3 characters.');
        isValid = false;
      }
      
      // Validate year (4 digits)
      const year = document.getElementById('inv_year');
      if (!/^\d{4}$/.test(year.value)) {
        alert('Year must be a 4-digit number.');
        isValid = false;
      }
      
      // Validate price (numeric)
      const price = document.getElementById('inv_price');
      if (isNaN(price.value) || price.value <= 0) {
        alert('Please enter a valid price.');
        isValid = false;
      }
      
      // Validate miles (numeric)
      const miles = document.getElementById('inv_miles');
      if (isNaN(miles.value) || miles.value < 0) {
        alert('Please enter valid mileage.');
        isValid = false;
      }
      
      if (!isValid) {
        event.preventDefault();
      }
    });
  </script>
</body>
</html>